`torch_dtype` is deprecated! Use `dtype` instead!
============================================================
SmolVLA 闭环控制测试
============================================================

创建模拟环境...
✅ 环境创建成功

加载SmolVLA模型...
Loading  HuggingFaceTB/SmolVLM2-500M-Video-Instruct weights ...
Reducing the number of VLM layers to 16 ...
✅ 模型加载完成 (450.0M参数)


============================================================
Episode 1/3
============================================================
  Step 20: Distance=0.3931m
  Step 40: Distance=0.4345m
  Step 60: Distance=0.5056m
  Step 80: Distance=0.7825m
  Step 100: Distance=0.7854m
   轨迹图已保存: episode_1_trajectory.png

❌ Episode 1: FAILED
   Total Steps: 100
   Total Reward: -52.43
   Final Distance: 0.7854m
   Inferences: 2

============================================================
Episode 2/3
============================================================
  Step 20: Distance=0.2265m
  Step 40: Distance=0.4458m
  Step 60: Distance=0.6538m
  Step 80: Distance=0.6810m
  Step 100: Distance=0.9743m
   轨迹图已保存: episode_2_trajectory.png

❌ Episode 2: FAILED
   Total Steps: 100
   Total Reward: -57.64
   Final Distance: 0.9743m
   Inferences: 2

============================================================
Episode 3/3
============================================================
  Step 20: Distance=0.2508m
  Step 40: Distance=0.4497m
  Step 60: Distance=0.4497m
  Step 80: Distance=0.2663m
  Step 100: Distance=0.3827m
   轨迹图已保存: episode_3_trajectory.png

❌ Episode 3: FAILED
   Total Steps: 100
   Total Reward: -36.99
   Final Distance: 0.3827m
   Inferences: 2

============================================================
测试完成
============================================================
成功率: 0/3 (0.0%)

📊 平均统计:
   步数: 100.0
   最终距离: 0.7141m
   推理次数: 2.0

============================================================
📋 验收结果
============================================================
1. 成功率: 0.0% ⚠️  未达标
2. 轨迹合理性: ⚠️  需要改进
3. 推理效率: 2.0次/episode ✅

⚠️  模拟测试需要改进
