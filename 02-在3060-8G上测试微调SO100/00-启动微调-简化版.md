# 🚨 微调脚本还需最后修复

## 问题总结
1. ✅ action_dim - 已修复
2. ✅ 图像key重映射 - 已修复  
3. ❌ language tokens - 需要添加tokenizer

##解决方案：使用lerobot官方训练脚本

微调涉及的数据预处理太复杂，建议直接使用lerobot官方训练脚本：

```bash
cd /root/lerobot_project
source smolvla_env/bin/activate

# 使用官方训练脚本
python lerobot/src/lerobot/scripts/lerobot_train.py \
    --policy.path=lerobot/smolvla_base \
    --dataset.repo_id=lerobot/svla_so100_pickplace \
    --batch_size=4 \
    --gradient_accumulation_steps=8 \
    --steps=20000 \
    --output_dir=./02-在3060-8G上测试微调SO100/outputs \
    --policy.device=cuda \
    --wandb.enable=false
```

这样官方脚本会自动处理：
- ✅ 图像key映射
- ✅ Language token生成
- ✅ 数据加载
- ✅ 混合精度训练
- ✅ 检查点保存

## 预期时间
- 8GB显存，batch=4，accumulation=8
- 约2-3小时完成20000步

## 启动命令

```bash
cd /root/lerobot_project
source smolvla_env/bin/activate
nohup python lerobot/src/lerobot/scripts/lerobot_train.py \
    --policy.path=lerobot/smolvla_base \
    --dataset.repo_id=lerobot/svla_so100_pickplace \
    --batch_size=4 \
    --steps=20000 \
    --output_dir=./02-在3060-8G上测试微调SO100/outputs \
    --policy.device=cuda > train.log 2>&1 &

# 查看日志
tail -f train.log
```
